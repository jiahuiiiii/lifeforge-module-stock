import{importShared as ce}from"./__federation_fn_import-E6wRZccp.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{I as P}from"./iconify-CHsp7AQ2.js";import{g as ue}from"./_commonjsHelpers-CE1G-McA.js";import{c as fe,p as me}from"./middleware-B78Bpy5V.js";var X={exports:{}},ge=X.exports,ae;function xe(){return ae||(ae=1,(function(d,N){(function(c,m){d.exports=m()})(ge,(function(){var c=1e3,m=6e4,g=36e5,v="millisecond",w="second",O="minute",k="hour",h="day",x="week",l="month",y="quarter",p="year",C="date",Y="Invalid Date",W=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var n=["th","st","nd","rd"],t=a%100;return"["+a+(n[(t-20)%10]||n[t]||n[0])+"]"}},I=function(a,n,t){var s=String(a);return!s||s.length>=n?a:""+Array(n+1-s.length).join(t)+a},A={s:I,z:function(a){var n=-a.utcOffset(),t=Math.abs(n),s=Math.floor(t/60),r=t%60;return(n<=0?"+":"-")+I(s,2,"0")+":"+I(r,2,"0")},m:function a(n,t){if(n.date()<t.date())return-a(t,n);var s=12*(t.year()-n.year())+(t.month()-n.month()),r=n.clone().add(s,l),i=t-r<0,o=n.clone().add(s+(i?-1:1),l);return+(-(s+(t-r)/(i?r-o:o-r))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:l,y:p,w:x,d:h,D:C,h:k,m:O,s:w,ms:v,Q:y}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},D="en",_={};_[D]=$;var q="$isDayjsObject",L=function(a){return a instanceof Q||!(!a||!a[q])},G=function a(n,t,s){var r;if(!n)return D;if(typeof n=="string"){var i=n.toLowerCase();_[i]&&(r=i),t&&(_[i]=t,r=i);var o=n.split("-");if(!r&&o.length>1)return a(o[0])}else{var f=n.name;_[f]=n,r=f}return!s&&r&&(D=r),r||!s&&D},j=function(a,n){if(L(a))return a.clone();var t=typeof n=="object"?n:{};return t.date=a,t.args=arguments,new Q(t)},u=A;u.l=G,u.i=L,u.w=function(a,n){return j(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var Q=(function(){function a(t){this.$L=G(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[q]=!0}var n=a.prototype;return n.parse=function(t){this.$d=(function(s){var r=s.date,i=s.utc;if(r===null)return new Date(NaN);if(u.u(r))return new Date;if(r instanceof Date)return new Date(r);if(typeof r=="string"&&!/Z$/i.test(r)){var o=r.match(W);if(o){var f=o[2]-1||0,b=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],f,o[3]||1,o[4]||0,o[5]||0,o[6]||0,b)):new Date(o[1],f,o[3]||1,o[4]||0,o[5]||0,o[6]||0,b)}}return new Date(r)})(t),this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return u},n.isValid=function(){return this.$d.toString()!==Y},n.isSame=function(t,s){var r=j(t);return this.startOf(s)<=r&&r<=this.endOf(s)},n.isAfter=function(t,s){return j(t)<this.startOf(s)},n.isBefore=function(t,s){return this.endOf(s)<j(t)},n.$g=function(t,s,r){return u.u(t)?this[s]:this.set(r,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,s){var r=this,i=!!u.u(s)||s,o=u.p(t),f=function(R,T){var H=u.w(r.$u?Date.UTC(r.$y,T,R):new Date(r.$y,T,R),r);return i?H:H.endOf(h)},b=function(R,T){return u.w(r.toDate()[R].apply(r.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(T)),r)},M=this.$W,S=this.$M,E=this.$D,J="set"+(this.$u?"UTC":"");switch(o){case p:return i?f(1,0):f(31,11);case l:return i?f(1,S):f(0,S+1);case x:var F=this.$locale().weekStart||0,V=(M<F?M+7:M)-F;return f(i?E-V:E+(6-V),S);case h:case C:return b(J+"Hours",0);case k:return b(J+"Minutes",1);case O:return b(J+"Seconds",2);case w:return b(J+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,s){var r,i=u.p(t),o="set"+(this.$u?"UTC":""),f=(r={},r[h]=o+"Date",r[C]=o+"Date",r[l]=o+"Month",r[p]=o+"FullYear",r[k]=o+"Hours",r[O]=o+"Minutes",r[w]=o+"Seconds",r[v]=o+"Milliseconds",r)[i],b=i===h?this.$D+(s-this.$W):s;if(i===l||i===p){var M=this.clone().set(C,1);M.$d[f](b),M.init(),this.$d=M.set(C,Math.min(this.$D,M.daysInMonth())).$d}else f&&this.$d[f](b);return this.init(),this},n.set=function(t,s){return this.clone().$set(t,s)},n.get=function(t){return this[u.p(t)]()},n.add=function(t,s){var r,i=this;t=Number(t);var o=u.p(s),f=function(S){var E=j(i);return u.w(E.date(E.date()+Math.round(S*t)),i)};if(o===l)return this.set(l,this.$M+t);if(o===p)return this.set(p,this.$y+t);if(o===h)return f(1);if(o===x)return f(7);var b=(r={},r[O]=m,r[k]=g,r[w]=c,r)[o]||1,M=this.$d.getTime()+t*b;return u.w(M,this)},n.subtract=function(t,s){return this.add(-1*t,s)},n.format=function(t){var s=this,r=this.$locale();if(!this.isValid())return r.invalidDate||Y;var i=t||"YYYY-MM-DDTHH:mm:ssZ",o=u.z(this),f=this.$H,b=this.$m,M=this.$M,S=r.weekdays,E=r.months,J=r.meridiem,F=function(T,H,Z,K){return T&&(T[H]||T(s,i))||Z[H].slice(0,K)},V=function(T){return u.s(f%12||12,T,"0")},R=J||function(T,H,Z){var K=T<12?"AM":"PM";return Z?K.toLowerCase():K};return i.replace(z,(function(T,H){return H||(function(Z){switch(Z){case"YY":return String(s.$y).slice(-2);case"YYYY":return u.s(s.$y,4,"0");case"M":return M+1;case"MM":return u.s(M+1,2,"0");case"MMM":return F(r.monthsShort,M,E,3);case"MMMM":return F(E,M);case"D":return s.$D;case"DD":return u.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return F(r.weekdaysMin,s.$W,S,2);case"ddd":return F(r.weekdaysShort,s.$W,S,3);case"dddd":return S[s.$W];case"H":return String(f);case"HH":return u.s(f,2,"0");case"h":return V(1);case"hh":return V(2);case"a":return R(f,b,!0);case"A":return R(f,b,!1);case"m":return String(b);case"mm":return u.s(b,2,"0");case"s":return String(s.$s);case"ss":return u.s(s.$s,2,"0");case"SSS":return u.s(s.$ms,3,"0");case"Z":return o}return null})(T)||o.replace(":","")}))},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,s,r){var i,o=this,f=u.p(s),b=j(t),M=(b.utcOffset()-this.utcOffset())*m,S=this-b,E=function(){return u.m(o,b)};switch(f){case p:i=E()/12;break;case l:i=E();break;case y:i=E()/3;break;case x:i=(S-M)/6048e5;break;case h:i=(S-M)/864e5;break;case k:i=S/g;break;case O:i=S/m;break;case w:i=S/c;break;default:i=S}return r?i:u.a(i)},n.daysInMonth=function(){return this.endOf(l).$D},n.$locale=function(){return _[this.$L]},n.locale=function(t,s){if(!t)return this.$L;var r=this.clone(),i=G(t,s,!0);return i&&(r.$L=i),r},n.clone=function(){return u.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a})(),se=Q.prototype;return j.prototype=se,[["$ms",v],["$s",w],["$m",O],["$H",k],["$W",h],["$M",l],["$y",p],["$D",C]].forEach((function(a){se[a[1]]=function(n){return this.$g(n,a[0],a[1])}})),j.extend=function(a,n){return a.$i||(a(n,Q,j),a.$i=!0),j},j.locale=G,j.isDayjs=L,j.unix=function(a){return j(1e3*a)},j.en=_[D],j.Ls=_,j.p={},j}))})(X)),X.exports}var pe=xe();const re=ue(pe);var ee={exports:{}},be=ee.exports,ie;function ve(){return ie||(ie=1,(function(d,N){(function(c,m){d.exports=m()})(be,(function(){return function(c,m,g){c=c||{};var v=m.prototype,w={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function O(h,x,l,y){return v.fromToBase(h,x,l,y)}g.en.relativeTime=w,v.fromToBase=function(h,x,l,y,p){for(var C,Y,W,z=l.$locale().relativeTime||w,$=c.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],I=$.length,A=0;A<I;A+=1){var D=$[A];D.d&&(C=y?g(h).diff(l,D.d,!0):l.diff(h,D.d,!0));var _=(c.rounding||Math.round)(Math.abs(C));if(W=C>0,_<=D.r||!D.r){_<=1&&A>0&&(D=$[A-1]);var q=z[D.l];p&&(_=p(""+_)),Y=typeof q=="string"?q.replace("%d",_):q(_,x,D.l,W);break}}if(x)return Y;var L=W?z.future:z.past;return typeof L=="function"?L(Y):L.replace("%s",Y)},v.to=function(h,x){return O(h,x,this,!0)},v.from=function(h,x){return O(h,x,this)};var k=function(h){return h.$u?g.utc():g()};v.toNow=function(h){return this.to(k(this),h)},v.fromNow=function(h){return this.from(k(this),h)}}}))})(ee)),ee.exports}var ye=ve();const $e=ue(ye),te=fe()(me(d=>({entries:[],addEntry:N=>d(c=>({entries:[{...N,id:crypto.randomUUID(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...c.entries]})),updateEntry:(N,c)=>d(m=>({entries:m.entries.map(g=>g.id===N?{...g,...c,updatedAt:new Date().toISOString()}:g)})),deleteEntry:N=>d(c=>({entries:c.entries.filter(m=>m.id!==N)}))}),{name:"stock-diary-storage"})),ne={bullish:{icon:"tabler:trending-up",label:"Bullish",color:"text-green-500",bgColor:"bg-green-500/10"},neutral:{icon:"tabler:minus",label:"Neutral",color:"text-gray-500",bgColor:"bg-gray-500/10"},bearish:{icon:"tabler:trending-down",label:"Bearish",color:"text-red-500",bgColor:"bg-red-500/10"},excited:{icon:"tabler:flame",label:"Excited",color:"text-orange-500",bgColor:"bg-orange-500/10"},anxious:{icon:"tabler:alert-triangle",label:"Anxious",color:"text-yellow-500",bgColor:"bg-yellow-500/10"}},{Button:B,Card:de,ConfirmationModal:je,ModalHeader:Me,ModalWrapper:Ne,ModuleHeader:oe,TextInput:we,useModalStore:De}=await ce("lifeforge-ui"),{useRef:Se,useState:U}=await ce("react");re.extend($e);const he=["bullish","neutral","bearish","excited","anxious"];function le({isOpen:d,onClose:N,editEntry:c}){const m=te($=>$.addEntry),g=te($=>$.updateEntry),v=Se(null),[w,O]=U(c?.date||new Date().toISOString().split("T")[0]),[k,h]=U(c?.mood||"neutral"),[x,l]=U(c?.title||""),[y,p]=U(c?.content||""),[C,Y]=U(c?.imageDataUrl),W=$=>{const I=$.target.files?.[0];if(I){const A=new FileReader;A.onload=D=>{Y(D.target?.result)},A.readAsDataURL(I)}},z=()=>{x.trim()&&(c?g(c.id,{date:w,mood:k,title:x,content:y,imageDataUrl:C}):m({date:w,mood:k,title:x,content:y,imageDataUrl:C}),N())};return e.jsxs(Ne,{isOpen:d,children:[e.jsx(Me,{icon:c?"tabler:pencil":"tabler:notebook",title:c?"Edit Entry":"New Diary Entry",onClose:N}),e.jsxs("div",{className:"max-h-[70vh] space-y-4 overflow-y-auto p-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-bg-500 mb-1 block text-sm font-medium",children:"Date"}),e.jsx("input",{className:"border-bg-200 bg-bg-50 dark:border-bg-700 dark:bg-bg-900 w-full rounded-lg border px-3 py-2",type:"date",value:w,onChange:$=>O($.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-bg-500 mb-2 block text-sm font-medium",children:"How are you feeling about the market?"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:he.map($=>{const I=ne[$];return e.jsxs("button",{className:`flex items-center gap-2 rounded-lg border px-3 py-2 transition-colors ${k===$?`border-current ${I.color} ${I.bgColor}`:"border-bg-200 dark:border-bg-700 hover:bg-bg-100 dark:hover:bg-bg-800"}`,type:"button",onClick:()=>h($),children:[e.jsx(P,{className:"size-4",icon:I.icon}),e.jsx("span",{className:"text-sm",children:I.label})]},$)})})]}),e.jsx(we,{icon:"tabler:heading",label:"Title",namespace:"apps",placeholder:"Market thoughts...",value:x,onChange:l}),e.jsxs("div",{children:[e.jsx("label",{className:"text-bg-500 mb-1 block text-sm font-medium",children:"Notes"}),e.jsx("textarea",{className:"border-bg-200 bg-bg-50 dark:border-bg-700 dark:bg-bg-900 min-h-[120px] w-full resize-y rounded-lg border px-3 py-2",placeholder:"Write your thoughts about today's market, your trades, observations...",value:y,onChange:$=>p($.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-bg-500 mb-2 block text-sm font-medium",children:"Attach Image (optional)"}),e.jsx("input",{ref:v,accept:"image/*",className:"hidden",type:"file",onChange:W}),C?e.jsxs("div",{className:"relative",children:[e.jsx("img",{alt:"Diary attachment",className:"w-full rounded-lg object-cover",src:C}),e.jsx("button",{className:"absolute top-2 right-2 rounded-full bg-red-500 p-1 text-white",title:"Remove image",type:"button",onClick:()=>Y(void 0),children:e.jsx(P,{className:"size-4",icon:"tabler:x"})})]}):e.jsx(B,{className:"w-full",icon:"tabler:photo-plus",variant:"secondary",onClick:()=>v.current?.click(),children:"Add Image"})]})]}),e.jsxs("div",{className:"flex gap-3 p-4 pt-0",children:[e.jsx(B,{className:"flex-1",variant:"secondary",onClick:N,children:"Cancel"}),e.jsx(B,{className:"flex-1",disabled:!x.trim(),icon:c?"tabler:check":"tabler:plus",onClick:z,children:c?"Save Changes":"Add Entry"})]})]})}function ke({entry:d,onEdit:N}){const c=te(v=>v.deleteEntry),{open:m}=De(),g=ne[d.mood];return e.jsxs(de,{className:"group space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex size-10 items-center justify-center rounded-lg ${g.bgColor}`,children:e.jsx(P,{className:`size-5 ${g.color}`,icon:g.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:d.title}),e.jsxs("div",{className:"text-bg-500 flex items-center gap-2 text-xs",children:[e.jsx("span",{children:re(d.date).format("MMM D, YYYY")}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:g.color,children:g.label})]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[e.jsx(B,{icon:"tabler:pencil",variant:"plain",onClick:N}),e.jsx(B,{dangerous:!0,icon:"tabler:trash",variant:"plain",onClick:()=>m(je,{title:"Delete Entry",description:"Are you sure you want to delete this diary entry? This cannot be undone.",confirmationButton:"delete",onConfirm:async()=>{c(d.id)}})})]})]}),d.content&&e.jsx("p",{className:"text-bg-500 text-sm whitespace-pre-wrap",children:d.content}),d.imageDataUrl&&e.jsx("img",{alt:"Diary attachment",className:"max-h-64 w-full rounded-lg object-cover",src:d.imageDataUrl}),d.portfolioSnapshot&&e.jsxs("div",{className:"bg-bg-100 dark:bg-bg-800/50 flex items-center gap-4 rounded-lg px-3 py-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-bg-500",children:"Portfolio:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",d.portfolioSnapshot.totalValue.toLocaleString()]})]}),e.jsxs("div",{className:d.portfolioSnapshot.dailyChange>=0?"text-green-500":"text-red-500",children:[d.portfolioSnapshot.dailyChange>=0?"+":"",d.portfolioSnapshot.dailyChangePercent.toFixed(2),"%"]})]})]})}function Ee(){const d=te(l=>l.entries),[N,c]=U(!1),[m,g]=U(),[v,w]=U("all"),O=v==="all"?d:d.filter(l=>l.mood===v),k=O.reduce((l,y)=>{const p=re(y.date).format("MMMM YYYY");return l[p]||(l[p]=[]),l[p].push(y),l},{}),h=l=>{g(l),c(!0)},x=()=>{c(!1),g(void 0)};return d.length===0?e.jsxs("div",{className:"flex h-full animate-[fadeSlideIn_0.3s_ease-out] flex-col",children:[e.jsx(oe,{title:"Investing Diary"}),e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"bg-bg-200 dark:bg-bg-700 flex size-24 items-center justify-center rounded-full",children:e.jsx(P,{className:"text-bg-400 size-12",icon:"tabler:notebook"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("h3",{className:"mb-1 text-lg font-semibold",children:"Nothing in Diary"}),e.jsx("p",{className:"text-bg-500 mb-4 max-w-sm",children:"Add a new diary entry to get started!"}),e.jsx(B,{icon:"tabler:plus",onClick:()=>c(!0),children:"Write Your First Entry"})]})]}),e.jsx(le,{editEntry:m,isOpen:N,onClose:x},m?.id??"new")]}):e.jsxs("div",{className:"animate-[fadeSlideIn_0.3s_ease-out]",children:[e.jsx(oe,{title:"Investing Diary"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:`rounded-lg px-3 py-1.5 text-sm transition-colors ${v==="all"?"bg-custom-500 text-white":"bg-bg-100 dark:bg-bg-800 text-bg-500 hover:text-bg-800 dark:hover:text-bg-200"}`,type:"button",onClick:()=>w("all"),children:"All"}),he.map(l=>{const y=ne[l];return e.jsxs("button",{className:`flex items-center gap-1.5 rounded-lg px-3 py-1.5 text-sm transition-colors ${v===l?`${y.bgColor} ${y.color}`:"bg-bg-100 dark:bg-bg-800 text-bg-500 hover:text-bg-800 dark:hover:text-bg-200"}`,type:"button",onClick:()=>w(l),children:[e.jsx(P,{className:"size-3.5",icon:y.icon}),y.label]},l)})]}),e.jsx(B,{icon:"tabler:plus",onClick:()=>c(!0),children:"New Entry"})]}),Object.entries(k).map(([l,y])=>e.jsxs("div",{children:[e.jsx("h2",{className:"text-bg-500 mb-3 text-sm font-semibold tracking-wider uppercase",children:l}),e.jsx("div",{className:"space-y-4",children:y.map(p=>e.jsx(ke,{entry:p,onEdit:()=>h(p)},p.id))})]},l)),O.length===0&&e.jsx(de,{className:"py-8 text-center",children:e.jsx("p",{className:"text-bg-500",children:"No entries match the selected filter."})})]}),e.jsx(le,{editEntry:m,isOpen:N,onClose:x},m?.id??"new")]})}export{Ee as default};
