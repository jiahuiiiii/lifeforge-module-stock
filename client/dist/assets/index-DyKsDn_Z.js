import{importShared as te}from"./__federation_fn_import-E6wRZccp.js";import{j as e}from"./jsx-runtime-u17CrQMm.js";import{I as h}from"./iconify-CHsp7AQ2.js";import{g as j,S as b}from"./ScoreBadge-CJJ7ftlj.js";import{u as k,g as de,C as X,a as me,b as ee,c as xe}from"./store-Cu4D6-5t.js";const n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function ge(t,a=0){return(n[t[a+0]]+n[t[a+1]]+n[t[a+2]]+n[t[a+3]]+"-"+n[t[a+4]]+n[t[a+5]]+"-"+n[t[a+6]]+n[t[a+7]]+"-"+n[t[a+8]]+n[t[a+9]]+"-"+n[t[a+10]]+n[t[a+11]]+n[t[a+12]]+n[t[a+13]]+n[t[a+14]]+n[t[a+15]]).toLowerCase()}let D;const ue=new Uint8Array(16);function he(){if(!D){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D=crypto.getRandomValues.bind(crypto)}return D(ue)}const be=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),se={randomUUID:be};function pe(t,a,x){t=t||{};const i=t.random??t.rng?.()??he();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,ge(i)}function ve(t,a,x){return se.randomUUID&&!t?se.randomUUID():pe(t)}const{Button:f,Card:U,Checkbox:je,ListboxInput:fe,ListboxOption:Ne,TextInput:c}=await te("lifeforge-ui"),{useMemo:Se,useState:r}=await te("react"),ye=[{id:"valueChain",label:"Value Chain",description:"Does the company have stable needs → Revenue → Profit flow?"},{id:"dividendPolicy",label:"Dividend Policy",description:"Is there a consistent history of paying dividends?"},{id:"management",label:"Management Integrity",description:"Is the management honest? (No accounting scandals)"},{id:"moat",label:"Competitive Moat",description:"Does the company have a clear competitive advantage?"}];function Ve(){const[t,a]=r(1),[x,i]=r(""),[o,z]=r(""),[p,P]=r(""),[F,_]=r({valueChain:!1,dividendPolicy:!1,management:!1,moat:!1}),[N,V]=r(""),[S,I]=r(""),[y,E]=r(""),[C,L]=r(""),[w,R]=r(""),[v,O]=r("profit_inflow"),[A,T]=r(""),g=k(s=>s.settings),q=k(s=>s.cashFlowScores),ae=k(s=>s.addLog),M=k(s=>s.calculatorLogs),$=Object.values(F).every(Boolean),l=Se(()=>{const s=parseFloat(N)||0,m=parseFloat(S)||0,u=parseFloat(y)||0,ne=parseFloat(C)||0,re=parseFloat(w)||0,G=parseFloat(A)||0,Q=j(s,g.cagr),B=j(m,g.dy),Z=j(u,g.pe),W=j(ne,g.margin),Y=j(re,g.roe),H=q[v],J=Q+B+Z,K=W+Y+H,ie=J+K,ce=s>0&&u/s<=1,oe=u>0&&G>0&&(1-u/G)*100>=25;return{cagrScore:Q,dyScore:B,peScore:Z,marginScore:W,roeScore:Y,cashFlowScore:H,gdpScore:J,prcScore:K,totalScore:ie,passedZulu:ce,undervaluedPe:oe}},[N,S,y,C,w,v,A,g]),d=de(l.gdpScore,l.prcScore),le=()=>{const s={id:ve(),ticker:o.toUpperCase(),stockExchange:x.toUpperCase(),companyName:p,date:new Date().toISOString(),cagrValue:parseFloat(N)||0,dyValue:parseFloat(S)||0,peValue:parseFloat(y)||0,marginValue:parseFloat(C)||0,roeValue:parseFloat(w)||0,cashFlowOption:v,gdpScore:l.gdpScore,prcScore:l.prcScore,totalScore:l.totalScore,passedZulu:l.passedZulu,undervaluedPe:l.undervaluedPe,qualitativeChecks:F};ae(s),a(1),z(""),i(""),P(""),_({valueChain:!1,dividendPolicy:!1,management:!1,moat:!1}),V(""),I(""),E(""),L(""),R(""),O("profit_inflow"),T("")};return e.jsxs("div",{className:"mx-auto max-w-4xl animate-[fadeSlideIn_0.3s_ease-out] space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center gap-2",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:`flex size-8 items-center justify-center rounded-full text-sm font-semibold transition-colors ${t===s?"bg-custom-500 text-white":t>s?"bg-green-500/20 text-green-500":"bg-bg-200 text-bg-500 dark:bg-bg-700"}`,disabled:s>t,type:"button",onClick:()=>s<t&&a(s),children:t>s?e.jsx(h,{className:"size-4",icon:"tabler:check"}):s}),s<3&&e.jsx("div",{className:`h-0.5 w-8 ${t>s?"bg-green-500":"bg-bg-200 dark:bg-bg-700"}`})]},s))}),t===1&&e.jsxs(U,{className:"animate-[fadeSlideIn_0.3s_ease-out]",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Phase 1: Sleep Strategy Gate"}),e.jsx("p",{className:"text-bg-500 mb-6",children:"Review these qualitative factors (recommended). You may proceed even if not all criteria are met."}),e.jsx("div",{className:"mb-6 space-y-4",children:ye.map(s=>e.jsxs("div",{className:"border-bg-200 dark:border-bg-700 flex items-start gap-3 rounded-lg border p-4",children:[e.jsx(je,{checked:F[s.id],onCheckedChange:m=>_(u=>({...u,[s.id]:m}))}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-bg-500 text-sm",children:s.description})]})]},s.id))}),!$&&e.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg border border-yellow-500/50 bg-yellow-500/10 p-3 text-sm text-yellow-500",children:[e.jsx(h,{className:"size-5 shrink-0",icon:"tabler:alert-triangle"}),e.jsx("span",{children:"Not all criteria are met. Proceed with caution - investing in companies that fail these checks carries higher risk."})]}),e.jsx(f,{className:"w-full",icon:"tabler:arrow-right",onClick:()=>a(2),children:$?"Next: Quantitative Analysis":"Skip to Quantitative Analysis"})]},"phase-1"),t===2&&e.jsxs(U,{className:"min-h-[600px] animate-[fadeSlideIn_0.3s_ease-out]",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold",children:"Phase 2: Quantitative Data Entry"}),e.jsxs("div",{className:"mb-6 flex flex-row gap-4",children:[e.jsx(c,{icon:"tabler:building",label:"Stock Exchange",placeholder:"e.g., NASDAQ",value:x,onChange:i}),e.jsx(c,{required:!0,icon:"tabler:tag",label:"Stock Ticker",placeholder:"e.g., AAPL",value:o,onChange:z}),e.jsx(c,{icon:"tabler:building-bank",label:"Company Name",placeholder:"e.g., Apple Inc.",value:p,onChange:P})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 font-semibold",children:[e.jsx("span",{className:"bg-custom-500 size-2 rounded-full"}),"GDP - Creating Wealth",e.jsxs("span",{className:"text-bg-500 ml-auto text-sm font-normal",children:["Score: ",l.gdpScore,"/100"]}),(()=>{const s=o.trim()?M.find(m=>m.ticker.toLowerCase()===o.trim().toLowerCase()):null;return s?e.jsxs("button",{className:"text-custom-500 hover:text-custom-600 ml-2 flex items-center gap-1 rounded-lg border border-current px-2 py-1 text-xs transition-colors",type:"button",onClick:()=>{s.cagr!==void 0&&V(s.cagr.toFixed(2)),s.dy!==void 0&&I(s.dy.toFixed(2)),s.pe!==void 0&&E(s.pe.toFixed(2)),!p&&s.name&&P(s.name),!x&&s.exchange&&i(s.exchange)},children:[e.jsx(h,{className:"size-3",icon:"tabler:download"}),"Fetch from Logbook"]}):null})()]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"G: CAGR (%)"}),e.jsx(b,{maxScore:50,score:l.cagrScore,size:"sm"})]}),e.jsx(c,{required:!0,icon:"tabler:trending-up",label:"CAGR (%)",placeholder:"e.g., 15",value:N,onChange:V})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"D: Dividend Yield (%)"}),e.jsx(b,{maxScore:40,score:l.dyScore,size:"sm"})]}),e.jsx(c,{required:!0,icon:"tabler:percentage",label:"Dividend Yield (%)",placeholder:"e.g., 3",value:S,onChange:I})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"P: PE Ratio"}),e.jsx(b,{maxScore:30,score:l.peScore,size:"sm"})]}),e.jsx(c,{required:!0,icon:"tabler:chart-bar",label:"PE Ratio",placeholder:"e.g., 12",value:y,onChange:E})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 font-semibold",children:[e.jsx("span",{className:"size-2 rounded-full bg-blue-500"}),"PRC - Sustaining Wealth",e.jsxs("span",{className:"text-bg-500 ml-auto text-sm font-normal",children:["Score: ",l.prcScore,"/100"]}),(()=>{const s=o.trim()?M.find(m=>m.ticker.toLowerCase()===o.trim().toLowerCase()):null;return!s||s.margin===void 0&&s.roe===void 0?null:e.jsxs("button",{className:"text-custom-500 hover:text-custom-600 ml-2 flex items-center gap-1 rounded-lg border border-current px-2 py-1 text-xs transition-colors",type:"button",onClick:()=>{s.margin!==void 0&&L(s.margin.toFixed(2)),s.roe!==void 0&&R(s.roe.toFixed(2))},children:[e.jsx(h,{className:"size-3",icon:"tabler:download"}),"Fetch from Logbook"]})})()]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"P: Profit Margin (%)"}),e.jsx(b,{maxScore:20,score:l.marginScore,size:"sm"})]}),e.jsx(c,{required:!0,icon:"tabler:chart-pie",label:"Profit Margin (%)",placeholder:"e.g., 20",value:C,onChange:L})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"R: ROE (%)"}),e.jsx(b,{maxScore:20,score:l.roeScore,size:"sm"})]}),e.jsx(c,{required:!0,icon:"tabler:activity",label:"ROE (%)",placeholder:"e.g., 18",value:w,onChange:R})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-bg-500 mb-1 flex items-center justify-between text-sm",children:[e.jsx("span",{children:"C: Cash Flow"}),e.jsx(b,{maxScore:40,score:l.cashFlowScore,size:"sm"})]}),e.jsx(fe,{buttonContent:e.jsx("span",{children:X.find(s=>s.value===v)?.label??"Select"}),icon:"tabler:coin",label:"Cash Flow",value:v,onChange:s=>O(s),children:X.map(s=>e.jsx(Ne,{label:`${s.label} (${q[s.value]}pts)`,value:s.value},s.value))})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 font-semibold",children:[e.jsx("span",{className:"size-2 rounded-full bg-purple-500"}),"Optional: Additional Checks"]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.jsx(c,{icon:"tabler:history",label:"10-Year Avg PE (for PE Discount check)",placeholder:"e.g., 20",value:A,onChange:T})}),e.jsxs("div",{className:"mt-3 flex gap-4",children:[l.passedZulu&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-green-500",children:[e.jsx(h,{icon:"tabler:check"}),"Zulu Pass (PEG ≤ 1.0)"]}),l.undervaluedPe&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-green-500",children:[e.jsx(h,{icon:"tabler:check"}),"Undervalued (PE ≥25% discount)"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{icon:"tabler:arrow-left",variant:"secondary",onClick:()=>a(1),children:"Back"}),e.jsx(f,{className:"flex-1",disabled:!o.trim(),icon:"tabler:arrow-right",onClick:()=>a(3),children:"View Verdict"})]})]},"phase-2"),t===3&&e.jsxs(U,{className:"min-h-[600px] animate-[fadeSlideIn_0.3s_ease-out] text-center",children:[e.jsx("h2",{className:"mb-6 text-xl font-bold",children:"Phase 3: The Verdict"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-bg-500 text-sm",children:"Stock"}),e.jsxs("div",{className:"text-2xl font-bold",children:[x.toUpperCase(),":",o.toUpperCase()]}),p&&e.jsx("div",{className:"text-bg-500",children:p})]}),e.jsxs("div",{className:"mx-auto mb-6 grid max-w-md grid-cols-3 gap-4",children:[e.jsxs("div",{className:`rounded-lg p-4 transition-colors ${l.gdpScore>=50?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[e.jsx("div",{className:"text-sm font-medium",children:"GDP"}),e.jsx("div",{className:"text-2xl font-bold",children:l.gdpScore}),e.jsx("div",{className:"text-xs font-bold uppercase",children:l.gdpScore>=50?"Pass":"Fail"})]}),e.jsxs("div",{className:`rounded-lg p-4 transition-colors ${l.prcScore>=50?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[e.jsx("div",{className:"text-sm font-medium",children:"PRC"}),e.jsx("div",{className:"text-2xl font-bold",children:l.prcScore}),e.jsx("div",{className:"text-xs font-bold uppercase",children:l.prcScore>=50?"Pass":"Fail"})]}),e.jsxs("div",{className:"bg-bg-100 dark:bg-bg-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-bg-500 text-sm",children:"Total"}),e.jsx("div",{className:"text-2xl font-bold",children:l.totalScore}),e.jsx("div",{className:"text-bg-400 text-xs font-medium",children:"POINTS"})]})]}),e.jsxs("div",{className:`mx-auto mb-6 inline-flex items-center gap-3 rounded-xl border-2 px-6 py-4 ${me(d)}`,children:[e.jsx("div",{className:`text-5xl font-black ${ee(d)}`,children:d}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:`text-lg font-bold ${ee(d)}`,children:["Verdict: ",xe(d)]}),e.jsxs("div",{className:"text-bg-500 text-sm",children:[d==="PASS"&&"Score >= 50 in both - Strong Candidate",d==="NEUTRAL"&&"Mixed Results - Watch and Monitor",d==="FAIL"&&"Does not meet criteria - Reject"]})]})]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx(f,{icon:"tabler:arrow-left",variant:"secondary",onClick:()=>a(2),children:"Back to Edit"}),e.jsx(f,{icon:"tabler:device-floppy",onClick:le,children:"Save to Logbook"})]})]},"phase-3")]})}export{Ve as default};
