import{importShared as k}from"./__federation_fn_import-E6wRZccp.js";const j=t=>{let s;const e=new Set,o=(l,u)=>{const d=typeof l=="function"?l(s):l;if(!Object.is(d,s)){const p=s;s=u??(typeof d!="object"||d===null)?d:Object.assign({},s,d),e.forEach(v=>v(s,p))}},a=()=>s,c={setState:o,getState:a,getInitialState:()=>f,subscribe:l=>(e.add(l),()=>e.delete(l))},f=s=t(o,a,c);return c},E=(t=>t?j(t):j),b=await k("react"),x=t=>t;function C(t,s=x){const e=b.useSyncExternalStore(t.subscribe,b.useCallback(()=>s(t.getState()),[t,s]),b.useCallback(()=>s(t.getInitialState()),[t,s]));return b.useDebugValue(e),e}const w=t=>{const s=E(t),e=o=>C(s,o);return Object.assign(e,s),e},P=(t=>t?w(t):w);function F(t,s){let e;try{e=t()}catch{return}return{getItem:a=>{var n;const h=f=>f===null?null:JSON.parse(f,void 0),c=(n=e.getItem(a))!=null?n:null;return c instanceof Promise?c.then(h):h(c)},setItem:(a,n)=>e.setItem(a,JSON.stringify(n,void 0)),removeItem:a=>e.removeItem(a)}}const H=t=>s=>{try{const e=t(s);return e instanceof Promise?e:{then(o){return H(o)(e)},catch(o){return this}}}catch(e){return{then(o){return this},catch(o){return H(o)(e)}}}},J=(t,s)=>(e,o,a)=>{let n={storage:F(()=>localStorage),partialize:r=>r,version:0,merge:(r,g)=>({...g,...r}),...s},h=!1,c=0;const f=new Set,l=new Set;let u=n.storage;if(!u)return t((...r)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),e(...r)},o,a);const d=()=>{const r=n.partialize({...o()});return u.setItem(n.name,{state:r,version:n.version})},p=a.setState;a.setState=(r,g)=>(p(r,g),d());const v=t((...r)=>(e(...r),d()),o,a);a.getInitialState=()=>v;let S;const O=()=>{var r,g;if(!u)return;const I=++c;h=!1,f.forEach(i=>{var m;return i((m=o())!=null?m:v)});const y=((g=n.onRehydrateStorage)==null?void 0:g.call(n,(r=o())!=null?r:v))||void 0;return H(u.getItem.bind(u))(n.name).then(i=>{if(i)if(typeof i.version=="number"&&i.version!==n.version){if(n.migrate){const m=n.migrate(i.state,i.version);return m instanceof Promise?m.then(_=>[!0,_]):[!0,m]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,i.state];return[!1,void 0]}).then(i=>{var m;if(I!==c)return;const[_,R]=i;if(S=n.merge(R,(m=o())!=null?m:v),e(S,!0),_)return d()}).then(()=>{I===c&&(y?.(S,void 0),S=o(),h=!0,l.forEach(i=>i(S)))}).catch(i=>{I===c&&y?.(void 0,i)})};return a.persist={setOptions:r=>{n={...n,...r},r.storage&&(u=r.storage)},clearStorage:()=>{u?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>O(),hasHydrated:()=>h,onHydrate:r=>(f.add(r),()=>{f.delete(r)}),onFinishHydration:r=>(l.add(r),()=>{l.delete(r)})},n.skipHydration||O(),S||v},L=J;export{P as c,L as p};
